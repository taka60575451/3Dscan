src:
  structure.yaml:
    content: |-
      LiDAR 3Dスキャン点群データ取得Webアプリケーション (HTML/JS実装)
      
      このプロジェクトはiPhone/iPadのLiDARセンサーを活用して、高精度な点群データを取得・可視化・エクスポートするWebアプリケーションです。
      TSX版と同等の機能を持ちながら、純粋なHTML/JavaScript/CSSのみで実装し、ファイル数を30個以下に抑えています。
      
      主な機能:
      - LiDARセンサーを使用した高精度点群データ取得（mm単位）
      - 最大465平方メートルのスキャン範囲
      - リアルタイム3Dプレビュー表示
      - PLY/E57形式でのデータエクスポート
      - 「Max Area」「Max Detail」スキャンモード切替
      - デバイス互換性チェック（iPhone 12 Pro以降/iPad Pro 2020以降対応）
      
      技術スタック:
      - HTML5 / CSS3 / JavaScript (ES6+)
      - Three.js (3D点群レンダリング)
      - WebGL (グラフィック処理)
      - ARKit Web API (iOS LiDARセンサーアクセス)
      - WebXR (AR体験)
      
      アーキテクチャ:
      - モジュールパターンによる機能分離
      - イベント駆動型アーキテクチャ
      - カスタマイズ可能なクラスベース設計
      - ローカルストレージによる設定・データ保存
      
      agent選定理由: claude-3-7-sonnet-20250219は複雑なWebアプリの設計と、3D/ARに関する高度な
      JavaScript実装に優れており、特にLiDARセンサーとWebXRの連携実装に適しています。
    dependency: []
    agent: "claude-3-7-sonnet-20250219"
    api: []
  html:
    index.html:
      content: |-
        メインHTMLファイル
        
        機能:
        - アプリケーションのエントリーポイント
        - すべてのJSとCSSのロード
        - アプリケーションの基本レイアウト構造
        - 検出、スキャン、結果表示の各ビューのHTMLコンテナ
        - モーダルやポップアップのテンプレート
        
        構造:
        - ヘッダー（アプリ名、設定アイコン）
        - メインコンテナ（デバイス検出、スキャンビュー、結果ビュー）
        - フッター（著作権情報、バージョン）
        - モーダルテンプレート（設定、エクスポート、ヘルプ）
        - ローディングオーバーレイ
        
        特徴:
        - データ属性を使用したビュー切り替え
        - CSS変数によるテーマ制御
        - セマンティックHTML構造
        - WAI-ARIA対応のアクセシビリティ
        - レスポンシブデザイン用メタタグ
        
        agent選定理由: claude-3-7-sonnet-20250219はHTML構造設計とアクセシビリティの実装に優れており、
        複雑なレイアウトと動的コンテンツの基盤となるマークアップの作成に最適です。
      dependency:
        - src/css/main.css
        - src/js/app.js
      agent: "claude-3-7-sonnet-20250219"
      api: []
    help.html:
      content: |-
        ヘルプページHTML
        
        機能:
        - アプリケーションの使用方法ガイド
        - よくある質問と回答
        - トラブルシューティング情報
        - サポート連絡先
        - 互換性情報
        
        構造:
        - ヘッダー（タイトル、戻るボタン）
        - 目次ナビゲーション
        - セクション別コンテンツ
          * 使い方ガイド
          * スキャンのコツ
          * エクスポートオプション
          * 対応デバイス一覧
          * トラブルシューティング
          * よくある質問
        - フッター（サポート情報）
        
        特徴:
        - トグル式セクション表示
        - 内部リンクによるナビゲーション
        - 画像によるチュートリアル
        - 印刷用スタイル対応
        
        agent選定理由: claude-3-7-sonnet-20250219は情報アーキテクチャとドキュメント構造化に優れており、
        ユーザーガイドとしての使いやすさを重視したヘルプページの作成に最適です。
      dependency:
        - src/css/main.css
        - src/js/help.js
      agent: "claude-3-7-sonnet-20250219"
      api: []
  css:
    main.css:
      content: |-
        メインCSSファイル
        
        機能:
        - アプリケーション全体のスタイリング
        - レスポンシブレイアウト
        - ダークモード/ライトモード対応
        - アニメーションとトランジション
        - UIコンポーネントスタイル
        - アクセシビリティ対応
        
        構造:
        - CSS変数（カラー、サイズ、間隔など）
        - リセットとベーススタイル
        - レイアウトグリッド
        - コンポーネントスタイル
          * ヘッダー/フッター
          * ボタンとコントロール
          * カード/パネル
          * フォーム要素
          * モーダルとオーバーレイ
        - ユーティリティクラス
        - メディアクエリ
        - プリントスタイル
        
        特徴:
        - モバイルファースト設計
        - CSS Grid/Flexboxレイアウト
        - プレフィックス自動追加
        - 最適化されたセレクタ
        - メディアクエリによるレスポンシブ対応
        
        agent選定理由: claude-3-7-sonnet-20250219はモダンなCSSの実装と最適化に優れており、
        レスポンシブデザインとアクセシビリティ対応のスタイリングの実装に最適です。
      dependency: []
      agent: "claude-3-7-sonnet-20250219"
      api: []
  js:
    app.js:
      content: |-
        メインアプリケーションJavaScript
        
        機能:
        - アプリケーションの初期化と設定
        - ビューの管理と切り替え
        - グローバルイベントリスナー
        - デバイスとブラウザの互換性チェック
        - モジュール読み込みと初期化
        - エラーハンドリング
        
        実装詳細:
        - IIFE（即時実行関数式）でモジュールパターン実装
        - イベント委任による効率的なイベント処理
        - 非同期モジュールロード
        - デバイス検出とAPIチェック
        - ローカルストレージによる設定保存
        - ブラウザのテーマモード検出と同期
        
        エクスポート:
        - App名前空間（グローバルアクセス用）
        - 初期化関数
        - イベント発行/購読API
        - ユーティリティ関数
        
        agent選定理由: claude-3-7-sonnet-20250219はJavaScriptのモジュールパターンと
        アプリケーション構造の実装に優れており、複雑なWebアプリの骨格実装に最適です。
      dependency:
        - src/js/deviceDetector.js
        - src/js/viewManager.js
        - src/js/eventBus.js
        - src/js/settingsManager.js
      agent: "claude-3-7-sonnet-20250219"
      api: []
    lidarScanner.js:
      content: |-
        LiDARスキャン機能JavaScript
        
        機能:
        - WebXRを使ったLiDARセンサーアクセス
        - スキャンセッションの初期化と管理
        - スキャンモード設定（Max Area/Max Detail）
        - リアルタイムデータ取得
        - スキャン進捗管理
        - エラーハンドリング
        
        実装詳細:
        - WebXR Device APIの利用
        - ARKit Web API連携
        - 点群データ収集ロジック
        - スキャン設定の最適化
        - センサーデータのリアルタイム処理
        - エラー回復と再接続ロジック
        
        エクスポート:
        - スキャン初期化関数
        - スキャン制御関数（開始/停止/一時停止）
        - イベントコールバック登録
        - 設定変更関数
        - エラー状態関数
        
        agent選定理由: claude-3-7-sonnet-20250219はWebXRとモバイルセンサーアクセスの実装に優れており、
        LiDARセンサーからのデータ取得と処理の実装に最適です。
      dependency:
        - src/js/pointCloudProcessor.js
        - src/js/eventBus.js
      agent: "claude-3-7-sonnet-20250219"
      api: []
    pointCloudRenderer.js:
      content: |-
        点群データレンダリングJavaScript
        
        機能:
        - Three.jsを使った点群データのレンダリング
        - レンダリング設定調整（点サイズ、色など）
        - カメラコントロール実装
        - データの動的更新
        - パフォーマンス最適化
        - リアルタイムプレビューとスタティックビュー
        
        実装詳細:
        - Three.jsシーン設定
        - カスタムシェーダーによる点群描画
        - BufferGeometryを使った効率的なデータ管理
        - OrbitControlsによるカメラ操作
        - リサイズイベント処理
        - 描画最適化（フラスタムカリング、LOD）
        
        エクスポート:
        - レンダラー初期化関数
        - データ更新関数
        - ビュー制御関数
        - 設定変更関数
        - レンダリングループ制御
        
        agent選定理由: claude-3-7-sonnet-20250219はThree.jsと3Dグラフィックスプログラミングの実装に優れており、
        高性能な点群データレンダリングの実装に最適です。
      dependency:
        - src/js/shaders.js
        - src/js/eventBus.js
      agent: "claude-3-7-sonnet-20250219"
      api: []
    pointCloudProcessor.js:
      content: |-
        点群データ処理JavaScript
        
        機能:
        - 点群データの受信と構造化
        - データのフィルタリング（ノイズ除去、ダウンサンプリング）
        - 座標変換と位置補正
        - データ解析（密度、分布、統計）
        - データ最適化
        - レンダリング用バッファー生成
        
        実装詳細:
        - データ構造管理
        - WebWorkerによる非同期処理
        - 空間分割アルゴリズム（Octree）
        - フィルタリングアルゴリズム
        - 座標系変換行列計算
        - バッファー最適化
        
        エクスポート:
        - データ処理関数
        - フィルター適用関数
        - 解析結果取得関数
        - バッファー生成関数
        - 変換関数
        
        agent選定理由: claude-3-7-sonnet-20250219は点群データ処理と空間アルゴリズムの実装に優れており、
        大規模点群データの効率的な処理と最適化の実装に最適です。
      dependency:
        - src/js/workers/pointCloudWorker.js
        - src/js/eventBus.js
      agent: "claude-3-7-sonnet-20250219"
      api: []
    exportManager.js:
      content: |-
        データエクスポート管理JavaScript
        
        機能:
        - 点群データの各種形式へのエクスポート（PLY, E57）
        - エクスポート設定UI管理
        - ファイル生成と保存処理
        - プログレス表示
        - エラーハンドリング
        - メタデータ追加
        
        実装詳細:
        - ファイル形式変換ロジック
        - バイナリデータ生成
        - ファイルダウンロードトリガー
        - 非同期処理によるUI応答性維持
        - エラー処理とリトライロジック
        - メタデータフォーマット
        
        エクスポート:
        - エクスポート開始関数
        - 形式選択ハンドラー
        - 設定変更ハンドラー
        - プログレスコールバック
        - エラーコールバック
        
        agent選定理由: claude-3-7-sonnet-20250219はバイナリデータ処理とファイルエクスポートの実装に優れており、
        複雑な3Dデータフォーマットの変換と保存の実装に最適です。
      dependency:
        - src/js/workers/exportWorker.js
        - src/js/eventBus.js
      agent: "claude-3-7-sonnet-20250219"
      api: []
    measurementTools.js:
      content: |-
        3D測定ツールJavaScript
        
        機能:
        - 点群上での距離測定
        - 面積計算
        - 体積計算
        - 角度測定
        - 断面図生成
        - 測定結果表示と保存
        
        実装詳細:
        - Three.jsレイキャスティング
        - 点選択ロジック
        - 測定計算アルゴリズム
        - 視覚的インジケーター描画
        - 結果テキスト表示
        - 測定履歴管理
        
        エクスポート:
        - 測定ツール初期化関数
        - ツール選択ハンドラー
        - 点選択ハンドラー
        - 結果計算関数
        - 測定履歴関数
        
        agent選定理由: claude-3-7-sonnet-20250219は3D空間での測定と計算アルゴリズムの実装に優れており、
        点群データに対する測定ツールの高精度な実装に最適です。
      dependency:
        - src/js/pointCloudRenderer.js
        - src/js/eventBus.js
      agent: "claude-3-7-sonnet-20250219"
      api: []
    deviceDetector.js:
      content: |-
        デバイス検出JavaScript
        
        機能:
        - LiDAR対応デバイス検出
        - ブラウザ機能互換性確認
        - WebXR/AR対応確認
        - デバイス性能評価
        - 権限要求処理
        - エラーメッセージ生成
        
        実装詳細:
        - ユーザーエージェント解析
        - 機能検出（feature detection）
        - WebXR機能テスト
        - パフォーマンス測定
        - 動的UI更新
        - 互換性対応テーブル
        
        エクスポート:
        - 互換性チェック関数
        - デバイス情報取得関数
        - 権限要求関数
        - エラーメッセージ生成関数
        - 性能評価関数
        
        agent選定理由: claude-3-7-sonnet-20250219はデバイス検出とブラウザ互換性確認の実装に優れており、
        LiDARセンサーへのアクセス前の環境確認処理の実装に最適です。
      dependency:
        - src/js/eventBus.js
      agent: "claude-3-7-sonnet-20250219"
      api: []
    viewManager.js:
      content: |-
        ビュー管理JavaScript
        
        機能:
        - アプリケーションビューの切り替え
        - UI要素の表示/非表示制御
        - トランジションアニメーション
        - ビュー状態保存
        - URL履歴管理
        - コンテンツの動的ロード
        
        実装詳細:
        - DOM操作
        - CSSトランジション制御
        - データ属性を使ったビュー管理
        - 履歴API利用
        - イベント購読/発行
        - 遅延ロード処理
        
        エクスポート:
        - ビュー切替関数
        - 要素表示/非表示関数
        - トランジション制御関数
        - ビュー状態取得関数
        - ナビゲーション関数
        
        agent選定理由: claude-3-7-sonnet-20250219はDOMとUIの状態管理の実装に優れており、
        複数ビューの管理と滑らかな遷移処理の実装に最適です。
      dependency:
        - src/js/eventBus.js
      agent: "claude-3-7-sonnet-20250219"
      api: []
    settingsManager.js:
      content: |-
        設定管理JavaScript
        
        機能:
        - アプリケーション設定の保存/読み込み
        - ユーザー設定UI管理
        - テーマ設定（ダーク/ライトモード）
        - スキャン設定プリセット
        - ローカルストレージとの連携
        - デフォルト設定
        
        実装詳細:
        - ローカルストレージAPI利用
        - 設定フォーム処理
        - リアルタイム設定適用
        - テーマ切替ロジック
        - システム設定検出
        - 設定エクスポート/インポート
        
        エクスポート:
        - 設定取得/設定関数
        - テーマ切替関数
        - 設定UI初期化関数
        - エクスポート/インポート関数
        - デフォルト設定リセット関数
        
        agent選定理由: claude-3-7-sonnet-20250219は設定管理とユーザー設定インターフェースの実装に優れており、
        保存可能なアプリケーション設定システムの実装に最適です。
      dependency:
        - src/js/eventBus.js
      agent: "claude-3-7-sonnet-20250219"
      api: []
    eventBus.js:
      content: |-
        イベントバスJavaScript
        
        機能:
        - カスタムイベント発行/購読システム
        - コンポーネント間通信
        - グローバルイベント管理
        - 非同期イベント処理
        - デバッグロギング
        - イベントチェーン
        
        実装詳細:
        - 発行/購読パターン実装
        - イベントリスナー管理
        - イベントフィルタリング
        - 非同期処理（Promise連携）
        - デバッグモード
        - 購読解除
        
        エクスポート:
        - イベント登録関数
        - イベント発行関数
        - 購読解除関数
        - ワンタイムイベント関数
        - デバッグ切替関数
        
        agent選定理由: claude-3-7-sonnet-20250219はイベント駆動アーキテクチャの実装に優れており、
        疎結合なコンポーネント間通信システムの実装に最適です。
      dependency: []
      agent: "claude-3-7-sonnet-20250219"
      api: []
    shaders.js:
      content: |-
        WebGLシェーダーJavaScript
        
        機能:
        - 点群レンダリング用GLSLシェーダー定義
        - シェーダープログラム管理
        - パラメーター設定
        - 最適化されたレンダリングパイプライン
        - 視覚効果（色、サイズ、透明度）
        - 特殊エフェクト
        
        実装詳細:
        - GLSL頂点シェーダーコード
        - GLSL断片シェーダーコード
        - Three.jsとの統合
        - シェーダーパラメータ設定
        - エラーハンドリング
        - シェーダーバリアント
        
        エクスポート:
        - シェーダープログラムオブジェクト
        - パラメータ設定関数
        - シェーダープログラム生成関数
        - エフェクト切替関数
        
        agent選定理由: claude-3-7-sonnet-20250219はGLSLシェーダープログラミングの実装に優れており、
        点群データの効率的な描画のための高性能シェーダーの実装に最適です。
      dependency: []
      agent: "claude-3-7-sonnet-20250219"
      api: []
    ui.js:
      content: |-
        UIコンポーネントJavaScript
        
        機能:
        - 共通UIコンポーネント実装
        - スキャンコントロール
        - 結果ビューコントロール
        - モーダルとポップアップ
        - フォーム要素とバリデーション
        - プログレスインジケーター
        
        実装詳細:
        - DOM要素生成/操作
        - イベントリスナー設定
        - 動的UI更新
        - アニメーション制御
        - タッチ/マウス入力処理
        - アクセシビリティ対応
        
        エクスポート:
        - UIコンポーネント初期化関数
        - 要素生成/更新関数
        - イベントハンドラー
        - 表示/非表示関数
        - アニメーション関数
        
        agent選定理由: claude-3-7-sonnet-20250219はUIコンポーネントとインタラクティブ要素の実装に優れており、
        使いやすいユーザーインターフェースの実装に最適です。
      dependency:
        - src/js/eventBus.js
      agent: "claude-3-7-sonnet-20250219"
      api: []
    help.js:
      content: |-
        ヘルプページJavaScript
        
        機能:
        - ヘルプコンテンツ表示
        - 検索機能
        - 目次ナビゲーション
        - セクション開閉
        - 画像ビューア
        - サポートリンク
        
        実装詳細:
        - コンテンツトグル制御
        - アンカーリンク処理
        - 検索フィルタリング
        - スムーズスクロール
        - 履歴API統合
        - 印刷制御
        
        エクスポート:
        - ページ初期化関数
        - 検索関数
        - ナビゲーション関数
        - コンテンツ表示関数
        - 戻るボタン処理
        
        agent選定理由: claude-3-7-sonnet-20250219はヘルプシステムとドキュメント管理の実装に優れており、
        検索可能なマニュアルシステムの実装に最適です。
      dependency: []
      agent: "claude-3-7-sonnet-20250219"
      api: []
    utils.js:
      content: |-
        ユーティリティ関数JavaScript
        
        機能:
        - 共通ユーティリティ関数
        - データ変換
        - 数学計算
        - ファイル操作
        - 文字列処理
        - 日付/時間処理
        
        実装詳細:
        - 汎用ユーティリティ関数
        - フォーマット変換関数
        - 行列/ベクトル計算
        - ファイル名生成
        - データ型チェック
        - 数値フォーマット
        
        エクスポート:
        - 数学計算関数
        - フォーマット変換関数
        - ファイル操作関数
        - 型チェック関数
        - 日付/時間関数
        
        agent選定理由: claude-3-7-sonnet-20250219は汎用ユーティリティ関数の実装に優れており、
        アプリケーション全体で使用する共通機能の実装に最適です。
      dependency: []
      agent: "claude-3-7-sonnet-20250219"
      api: []
    workers:
      pointCloudWorker.js:
        content: |-
          点群データ処理WebWorker
          
          機能:
          - バックグラウンドでの点群データ処理
          - データフィルタリング
          - ダウンサンプリング
          - 座標変換
          - データ構造最適化
          - メイン処理のブロッキング防止
          
          実装詳細:
          - WebWorker API実装
          - メッセージング処理
          - 重い計算の非同期実行
          - プログレス通知
          - エラーハンドリング
          - データ転送最適化
          
          エクスポート:
          - Worker内処理関数
          - メッセージイベントハンドラー
          
          agent選定理由: claude-3-7-sonnet-20250219はWebWorkerと非同期処理の実装に優れており、
          UIスレッドをブロックしない高負荷データ処理の実装に最適です。
        dependency: []
        agent: "claude-3-7-sonnet-20250219"
        api: []
      exportWorker.js:
        content: |-
          データエクスポートWebWorker
          
          機能:
          - バックグラウンドでのエクスポート処理
          - PLY/E57形式変換
          - データ圧縮
          - ファイル生成
          - プログレス通知
          - メイン処理のブロッキング防止
          
          実装詳細:
          - WebWorker API実装
          - メッセージング処理
          - ファイル形式変換ロジック
          - バイナリデータ処理
          - 圧縮アルゴリズム
          - プログレス計算
          
          エクスポート:
          - Worker内処理関数
          - メッセージイベントハンドラー
          
          agent選定理由: claude-3-7-sonnet-20250219はファイル処理と非同期処理の実装に優れており、
          大規模点群データのエクスポート処理の実装に最適です。
        dependency: []
        agent: "claude-3-7-sonnet-20250219"
        api: []
  assets:
    images:
      icons.svg:
        content: |-
          SVGアイコンスプライト
          
          内容:
          - UIで使用するアイコンセット
          - スキャン関連アイコン
          - 制御アイコン
          - ナビゲーションアイコン
          - ツールアイコン
          - ステータスアイコン
          
          特徴:
          - 単一SVGファイルにまとめたスプライト
          - シンボル定義によるID参照
          - アクセシビリティ属性
          - レスポンシブサイズ対応
          - ハイコントラスト対応
          
          使用例:
          - <svg><use xlink:href="#icon-name"></use></svg>
          
          agent選定理由: claude-3-7-sonnet-20250219はSVGアイコン設計と最適化の実装に優れており、
          効率的なアイコンスプライトの実装に最適です。
        dependency: []
        agent: "claude-3-7-sonnet-20250219"
        api: []
      app-logo.svg:
        content: |-
          アプリケーションロゴSVG
          
          内容:
          - アプリケーションのロゴマーク
          - ヘッダーおよびスプラッシュスクリーン用
          - ベクターグラフィック形式
          
          特徴:
          - スケーラブルベクター形式
          - 単色デザイン（テーマカラーに対応）
          - 3Dスキャンモチーフ
          - 点群をモチーフにした抽象的デザイン
          - 高コントラスト
          
          使用箇所:
          - アプリヘッダー
          - ローディング画面
          - ファビコン（変換後）
          - マニフェスト
          
          agent選定理由: claude-3-7-sonnet-20250219はロゴデザインとSVG実装の設計に優れており、
          アプリケーションの視覚的アイデンティティを表現するロゴの実装に最適です。
        dependency: []
        agent: "claude-3-7-sonnet-20250219"
        api: []
    manifest.json:
      content: |-
        PWAマニフェストファイル
        
        機能:
        - Progressive Web Appの設定
        - ホーム画面追加情報
        - アプリアイコン定義
        - スプラッシュ画面設定
        - テーマカラー
        - オフライン対応設定
        
        内容:
        - アプリ名と短縮名
        - アイコンセット（各サイズ）
        - テーマカラーとバックグラウンドカラー
        - スタート URL
        - 表示モード
        - スコープ
        - 向き設定
        
        使用箇所:
        - PWA対応ブラウザでの表示
        - ホーム画面追加時
        
        agent選定理由: claude-3-7-sonnet-20250219はPWAマニフェスト設定の実装に優れており、
        モバイルデバイスでの最適な表示と機能を提供するための実装に最適です。
      dependency: []
      agent: "claude-3-7-sonnet-20250219"
      api: []
    service-worker.js:
      content: |-
        サービスワーカー
        
        機能:
        - オフラインサポート
        - アセットキャッシュ
        - 起動高速化
        - バックグラウンド同期
        - プッシュ通知（将来拡張用）
        - ネットワークリクエスト制御
        
        実装詳細:
        - キャッシュ戦略（Cache First）
        - アセットのプリキャッシュ
        - 動的キャッシュ
        - キャッシュ更新ロジック
        - オフラインフォールバック
        - バージョン管理
        
        使用箇所:
        - PWA動作時
        - オフライン使用時
        
        agent選定理由: claude-3-7-sonnet-20250219はサービスワーカーとオフラインキャッシュの実装に優れており、
        信頼性の高いオフライン動作を提供するPWA機能の実装に最適です。
      dependency: []
      agent: "claude-3-7-sonnet-20250219"
      api: []